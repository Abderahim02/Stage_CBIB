params {
  sc_input = "/data/gent/vo/000/gvo00070/vsc43831/rds/ctxhip10x_151060cells.rds"
  sp_input = "/data/gent/vo/000/gvo00070/vsc43831/rds/mousebrain_visium_10xdemo*.rds"
  annot = "subclass_label"
  sampleID = "external_donor_name_label"
  verbose = true
  runID_props = "_ABA10x"
  skip_metrics = true
  deconv_args = [cell2location: [build: "", fit:""],
                 spotlight: "--conserve.memory TRUE",
                 destvi: [build: "", fit: ""],
                 music: "--target_n_cells 4000 --filter_spots 100"] //filter only for sagittal_posterior1
 }
// stereoscope: "-stb 500 -scb 500 -gl /data/gent/438/vsc43831/spotless-benchmark/data/rds/hvgs_5000.txt",

process {
  withName: buildStereoscopeModel {
      memory = "96 GB"
      time = "48h"
  }
  withName: fitStereoscopeModel {
      memory = "96 GB"
      time = "20h"
  }

  withName: convertRDStoH5AD {
      memory = { "${ 32 * task.attempt } GB" }
  }

  withName: buildCell2locationModel {
      memory = { "${40 + (task.attempt * 8)} GB" }
      time = "4h"
  }

  withName: fitCell2locationModel {
      memory = { "${32 + (task.attempt * 8)} GB" }
      time = "4h"
  }

  withName: runMusic {
      memory = { "${64 + (task.attempt * 16)} GB" }
      time = "2h"
  }

  withName: runRCTD {
      memory = "48 GB"
      time = "8h"
  }

  withName: runSpotlight {
      memory = "64 GB"
      time = "48h"
  }

  withName: buildDestVIModel {
      memory = { "${32 + (task.attempt * 8)} GB" }
      time = { "${task.attempt * 4}h" }
  }

  withName: fitDestVIModel {
      memory = { "${32 + (task.attempt * 8)} GB" }
      time = { "${task.attempt * 4}h" }

  }
}