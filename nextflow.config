params.outdir = "/mnt/d/spade-benchmark/deconv_proportions"
params.sc_input = "/mnt/d/spade-benchmark/unit-test/test_sc_data.rds"
params.sp_input = "/mnt/d/spade-benchmark/unit-test/test_sp_data.rds"
params.sc_type = "seurat"
params.sp_type = "synthvisium"
params.annot = "subclass"
params.output = "proportions"
params.output_suffix = ""
params.sampleID = "none"
params.methods = "music,rctd,spotlight,stereoscope,cell2location"
params.cuda_device = "cpu"
params.epoch_build = 10
params.epoch_fit = 10

manifest {
    author = 'Chananchida Sang-aram'
    description = 'Pipeline for benchmarking spatial deconvolution and mapping tools'
    mainScript = 'main.nf'
    version = '0.1'
    defaultBranch = 'main'
}

profiles {
    local_env {
        process.executor = 'local'
        workDir = '/mnt/d/spade-benchmark/scripts/work'
        params.rootdir = '/mnt/d'

    }

    local_docker {
        process.executor = 'local'
        docker.enabled = true
        docker.runOptions = "--mount type=bind,source=/mnt/d/,target=/mnt/d/"
        workDir = '/mnt/d/spade-benchmark/scripts/work'
        params.rootdir = '/mnt/d'
    }

    prism {
        process.executor = "sge"
        process.clusterOptions = "-S /bin/bash -pe serial 12 -l h_vmem=8G"

        singularity {
            enabled = true
            cacheDir = "/group/irc/shared/spade_benchmark/singularity"
        }

        workDir = "$HOME/spade-benchmark/scripts/work"
        params.rootdir = "$HOME"

        // Script parameters
        params.outdir = "$HOME/spade-benchmark/deconv_proportions"
        params.sc_input = "$HOME/spade-benchmark/unit-test/test_sc_data.rds"
        params.sp_input = "$HOME/spade-benchmark/unit-test/test_sp_data.rds"
        params.epoch_build = "default"
        params.epoch_fit = "default"

        // Trace
        trace {
            enabled = false // need to install procps in the containers
            fields = 'task_id,hash,native_id,name,status,exit,container,cpus,disk,memory,attempt,realtime,%cpu,%mem,rss,peak_rss,vmem,peak_vmem'
        }
    }

}
